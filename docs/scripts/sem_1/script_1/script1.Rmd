---
title: 'Начинаем работу'
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
    highlight: pygments
  # df_print: paged
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Калькулятор в R
 
После того, как мы с вами ознакомились с оболочкой _RStudio_, настало время что-нибудь порешать. Для начала вернемся с вами в начальную школу и вспомним основные операции над числами. А так как мы уже в университете, сделаем это как настоящие программисты - через язык программирования! 

```{r collapse=TRUE}
2+2 # Сложение.
10-5 # Вычитание.
10*99 # Умножение.
225/15 # Деление, результат - целочисленный.
10/4 # Деление, результат - действительное число.
11%/%3 # Целая часть от деления.
11%%3 # Остаток от деления.
5^2 # Возведение в степень(1 вариант).
5**2 # Возведение в степень(2 вариант).
pi # Число Пи.
cos(pi) # Косинус.
sin(pi) # Синус.
exp(1) # Экспонента.
tan(0) # Тангенс.
abs(-5) # Модуль.
sqrt(144) # Корень.
round(3.4865, digits = 2) # Округление.
factorial(10) # Факториал.

``` 

Заметим, что даже на таком этапе мы с вами воспользовались встроенными функциями в _R_. Обычно функция состоит из основной переменной (или набора переменных), которая передается в функцию (в случае с функцией `cos()` это `pi`), а также с какими-то дополнительными аргументами (например, в функции `round()` это число знаков после запятой - `digits`). _R_ содержит в себе что-то вроде словаря по всем встроенным функциям, то есть справку. Вызвать ее можно знаком вопроса (`?round`) или вручную в панели управления справа во вкладке `help`. 

Необязательно помнить полное название функции. Достаточно начать писать название функции, потом нажать на клавиатуре `Tab` и выбрать из предложенных вариантов методом проб и ошибок (либо интуицией и знанием английского языка).

## Переменные

### Определение

Переменная - это самый простой тип данных в _R_. Вы можете сохранять какое-нибудь значение под определённым названием. Переменные в _R_ создавать очень просто, достаточно только написать название, а потом присвоить ему какое-то значение (например, число). Присваивание создается с помощью символов `<-` и `=` (лучше использовать первый вариант). Создается этот символ легко с помощью сочетания клавиш `alt и -` (на маке: `option и -`). Все ваши созданные переменные хранятся в **глобальном окружении R**. 

### Правила обозначения переменных

Теперь поговорим немного о названиях к переменным. Вот несколько правил:

1. Переменная обязательно начинается с буквы!
2. Пробелы использовать нельзя!
3. Если вы пишете длинный код, в котором очень много переменных, используйте названия, которые что-то говорят о данной переменной, дабы избежать путаницы. Не используйте рандомные названия, взятые с потолка (типа, "asfsadsf")
4. Название также должно быть не слишком длинным, иначе вы замучаетесь каждый раз его набирать при вызове переменной, а еще это занимает много места на экране.
5. Если название состоит из нескольких слов, пользуйтесь "змеиным языком". Это означает, что слова разделены символом _ (помним, что пробелы использовать нельзя).
6. Нежелательно использовать названия, которые уже даны функциям в _R_. Это создаст сложности, когда вы захотите вызвать функцию, либо что-то сделать с переменной. 

Вот несколько хороших и не очень названий для переменных:

```{r}
a <- 5
number <- 5
this_name_is_too_long <- 5
thisnameisdifficulttoread <- 5
```

**Важно!** _R_ отличает строчные и заглавные буквы, поэтому ниже представлены 2 разные переменные.
```{r}
M <- 99
m <- 66
```

### Типы переменных

В примерах выше мы присваивали переменным только числа, однако на этом типы переменных не заканчиваются. Рассмотрим их все:

1. Числовой - numeric/integer/double
2. Строковый - character
3. Логический - logical 
4. Категориальный или факторный - factor
5. Дата + время - date
6. NA - not available
7. NaN - not a number

```{r collapse=TRUE}
(number <- 5)
(name <- 'R_studio')
(log <- TRUE)
(factor <- factor("Jan"))
(date <- Sys.Date())
(na <- NA)
(nan <- NaN)
```

Класс переменной всегда можно проверить с помощью функций `class()` и `typeof()`. 

```{r collapse=TRUE}
class(number)
class(name)
class(log)
class(factor)
class(date)
class(na)
class(nan)
```

Также можно воспользоваться семейством функций `is.*`, чтобы узнать, принадлежит ли переменная к опреденному типу.

```{r collapse=TRUE}
is.numeric(number)
is.character(name)
is.logical(log)
is.factor(factor)
is.na(na)
```

Cемейство функций `as.*`, с помощью которых можно менять тип переменной.

```{r collapse=TRUE}
class(number)
number <- as.character(number)
class(number)
```

### Символы сравнения и логические операторы

В _R_ переменные (например, числа) можно сравнивать между собой, воспользовавшись операторами сравнений.

1. `==` - равно (обратим внимание на два символа = подряд)
2. `!=` - неравно
3. `>=` (`>`) - больше либо равно (больше)
4. `<=` (`<`) - меньше либо равно (меньше)

Если утверждение верно, мы получим булевский ответ **TRUE**, и **FALSE** в противном случае. 

Также стоит обратить внимание на сравнение чисел с плавающей точкой (double). 

```{r}
0.1 + 0.05 == 0.15 # результат FALSE
```

Такие числа лучше сравнивать следующим образом.

```{r}
all.equal(0.1+0.05, 0.15)
```

Теперь рассмотрим логические операторы:

1. `|` - или
2. `&` - и
3. `!` - не

### Дополнительно

Стоит также отметить задание в _R_ бесконечности и неопределенности:

```{r}
war_of <- Inf
b <- 0/0 # Not-a-Number (неопределенность)
```

Также уже было сказано, что все переменные хранятся в глобальном окружении (или в текущем рабочем пространстве). Вот несколько функций, связанных с этим:

1. `ls()` - Выводит на экран список объектов в текущем рабочем пространстве
2. `rm("список_объектов")` - Удаляет один или несколько объектов из рабочего пространства
3. Сочетание клавиш `Ctrl+L` (мак: `cmd + L`) - Очищает окно консоли от текста
4. `rm(list=ls())` - Очищает рабочее пространство

## Hello world

Теперь, когда мы научились создавать простейший тип данных в _R_, время написать нашу первую функцию (что? уже?). Когда программист начинает работать с новым языком, первая функция является HelloWorld, пишущаяся в одну строку. Мы же сделаем ее с использованием названия переменной!

```{r}
poslanie <- 'Hello World'
print(poslanie)
```

Замечание: функция `print()` отображает какую-либо переменную или другой тип данных на экран. Ей часто пользуются, когда хотят выполнить весь код сразу, а не по одной строке, и получить что-то на экран. 

